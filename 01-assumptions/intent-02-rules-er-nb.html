

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Rules for Entities, Rules for Relations</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mana.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '01-assumptions/intent-02-rules-er-nb';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Driving with Data" href="data.html" />
    <link rel="prev" title="Keywords" href="intent-01-keywords-nb.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../home.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../00-introduction/syllabus.html">Syllabus (PPOL 628 Spring 2022)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00-introduction/intro.html">Introduction</a></li>

<li class="toctree-l1 has-children"><a class="reference internal" href="../00-introduction/tools.html">First Tools of the Trade</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../00-introduction/tools-01env.html">Setting up a Computing Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../00-introduction/tools-02ops.html">Tools for Data Infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../00-introduction/tools-03sci.html">Tools for Data Science</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../00-introduction/references.html">Chapter Resources</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Assumptions</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intent.html">Expressions of Intent</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intent-01-keywords-nb.html">Keywords</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Rules for Entities, Rules for Relations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="data.html">Driving with Data</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="data-02-vecsem-nb.html">Vector Semantics</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Goals &amp; Approach</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../02-goals-approach/overview.html">Overview: Supervision (or the lack-thereof)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02-goals-approach/unsupervised.html">Unsupervised Techniques</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../02-goals-approach/unsupervised-01-reduction-nb.html">Prelude: On Reduction and High Dimensional Pancakes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-goals-approach/unsupervised-02-clustertopics-nb.html">Let Simmer, Unsupervised</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02-goals-approach/supervised.html">Supervised Machine Learning with Text</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul class="simple">
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Measure &amp; Evaluate</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../03-measure-evaluate/measuring-up.html">Similarities, Distances, and Performance Indication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-measure-evaluate/overview.html">Overview: <em>Metrics</em> and <em>Metrology</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-measure-evaluate/translator.html">The Good Translator: how you “win” <em>defines the game</em></a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Validate</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04-validation/trouble.html">Trouble in Paradise</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../appendix/datasets.html">Datasets for this Course</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/datasets/mtgjson-nb.html">MTGJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/datasets/tiny-shakespeare-nb.html">“Tiny” Shakespeare</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../appendix/tutorials.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/tutorials/markovian-shakespeare.html">Markovian Shakespeare</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/TLP-COI/text-data-course" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/TLP-COI/text-data-course/issues/new?title=Issue%20on%20page%20%2F01-assumptions/intent-02-rules-er-nb.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/01-assumptions/intent-02-rules-er-nb.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Rules for Entities, Rules for Relations</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#entity-legos-regular-expressions-regex">Entity Legos: Regular Expressions (RegEx)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-regex">What is RegEx</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-pedantic-note">A (pedantic note)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#take-a-break-exercises">Take a Break (Exercises)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#markdown-parser-worked-example">Markdown Parser (worked example)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tokenizers">Tokenizers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#technical-tokens-for-technical-entities">“Technical” Tokens for Technical Entities</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relational-pedantry-graphs-ontologies">Relational Pedantry: Graphs &amp; Ontologies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wordnet">WordNet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conceptnet">ConceptNet</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#takeaway">Takeaway</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="rules-for-entities-rules-for-relations">
<h1>Rules for Entities, Rules for Relations<a class="headerlink" href="#rules-for-entities-rules-for-relations" title="Permalink to this heading">#</a></h1>
<p>We’ve used words like <em>content</em> and <em>keywords</em> to refer to “stuff we’re interested in”, so let’s come up with a more unified term.</p>
<dl class="simple myst">
<dt>Entity</dt><dd><p>Something that exists independently, and is uniquely identifiable. <em>A thing we’re interested in that exists.</em></p>
</dd>
</dl>
<p>In the case of our tokens, many of the tokens-of-interest were words instantiating some <em>entity</em>.
Like tokens, entities can have <em>types</em>: e.g. <code class="docutils literal notranslate"><span class="pre">London</span></code> and <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">York</span></code> are both entities about a location, so <code class="docutils literal notranslate"><span class="pre">location</span></code> is an entity type.</p>
<p>In addition, we often know something useful about <em>how entities relate to one another</em>.</p>
<dl class="simple myst">
<dt>Relation</dt><dd><p>captures how entities are related to one another</p>
</dd>
</dl>
<p>This should be familiar from e.g. data modeling. If not, one way to think of this is</p>
<ul class="simple">
<li><p>entities ≈ nouns</p></li>
<li><p>relations ≈ verbs</p></li>
</ul>
<p>In this section, we’ll take a look at how people systematically express their intent about entities and relations: ways they write <strong>rules</strong> for them.</p>
<section id="entity-legos-regular-expressions-regex">
<h2>Entity Legos: Regular Expressions (RegEx)<a class="headerlink" href="#entity-legos-regular-expressions-regex" title="Permalink to this heading">#</a></h2>
<p><img alt="" src="https://imgs.xkcd.com/comics/regular_expressions.png" /></p>
<p>Recall the example above:</p>
<blockquote>
<div><p>we <em>missed</em> keyword occurrences in the text when the <strong>case</strong> was not taken into acount</p>
</div></blockquote>
<p>Hard-coding “lowercase”, while a viable option, case is only the tip of the text-variation iceberg. The answer to</p>
<blockquote>
<div><p>“How to I find strings that fit some <em>pattern</em> I’m looking for?”</p>
</div></blockquote>
<p>is almost always</p>
<blockquote>
<div><p><strong>Regular Expressions</strong></p>
</div></blockquote>
<section id="what-is-regex">
<h3>What is RegEx<a class="headerlink" href="#what-is-regex" title="Permalink to this heading">#</a></h3>
<p>ReGex is a mini-language for writing patterns that you want to find in a bunch of text. The most basic use is to match exact strings:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>pattern</p></th>
<th class="head"><p>meaning</p></th>
<th class="head"><p>example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">a</span></code></p></td>
<td><p><em>match character</em> <code class="docutils literal notranslate"><span class="pre">a</span></code></p></td>
<td><p><strong>a</strong>pple</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">the</span></code></p></td>
<td><p>_match string <code class="docutils literal notranslate"><span class="pre">the</span></code></p></td>
<td><p><strong>the</strong>re went <strong>the</strong> last one!</p></td>
</tr>
</tbody>
</table>
<p>This is the same as what we did above, for keywords: <code class="docutils literal notranslate"><span class="pre">my_pattern</span> <span class="pre">in</span> <span class="pre">my_text</span></code>. By default, RegEx patterns are case-sensitive! (<code class="docutils literal notranslate"><span class="pre">A</span></code> will not match an <code class="docutils literal notranslate"><span class="pre">a</span></code>)</p>
<p>Regex also has several <em>special characters</em> ,e.g. …</p>
<p>characters inside square brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> or patterns separated with <code class="docutils literal notranslate"><span class="pre">|</span></code>  are <em>options</em>.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>pattern</p></th>
<th class="head"><p>meaning</p></th>
<th class="head"><p>example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[Tt]h</span></code></p></td>
<td><p>“the” with upper or lower <code class="docutils literal notranslate"><span class="pre">t</span></code></p></td>
<td><p><strong>The</strong> end of <strong>the</strong> road</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[tT]he|end</span></code></p></td>
<td><p>either <code class="docutils literal notranslate"><span class="pre">[Tt]he</span></code> or <code class="docutils literal notranslate"><span class="pre">end</span></code></p></td>
<td><p><strong>The end</strong> of <strong>the</strong> road</p></td>
</tr>
</tbody>
</table>
<p><strong>Character classes</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>meaning</p></th>
<th class="head"><p>syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>character set</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[ABC]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>negated set</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[^ABC]</span></code></p></td>
</tr>
<tr class="row-even"><td><p>range</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[A-Z]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>dot (non-break)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></td>
</tr>
<tr class="row-even"><td><p>unicode</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\X</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>word (alpha, num, _)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\w</span></code></p></td>
</tr>
<tr class="row-even"><td><p>not word</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\W</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>digit, not digit</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\d,</span> <span class="pre">\D</span></code></p></td>
</tr>
<tr class="row-even"><td><p>whitespace, not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\s,</span> <span class="pre">\S</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>hspace, not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\h,</span> <span class="pre">\H</span></code></p></td>
</tr>
<tr class="row-even"><td><p>vspace, not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\v,</span> <span class="pre">\V</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>line break, not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\R,</span> <span class="pre">\N</span></code></p></td>
</tr>
</tbody>
</table>
<p><strong>Anchors</strong></p>
<p>These match <em>positions</em>, not characters!</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>meaning</p></th>
<th class="head"><p>syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>beginning</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>end</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">$</span></code></p></td>
</tr>
<tr class="row-even"><td><p>string begin</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\A</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>string end</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\Z</span></code></p></td>
</tr>
<tr class="row-even"><td><p>string end (no \n)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\z</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>word boundary, not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\b,</span> <span class="pre">\B</span></code></p></td>
</tr>
<tr class="row-even"><td><p>end of last match</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\G</span></code></p></td>
</tr>
</tbody>
</table>
<p><strong>Escaped Characters</strong></p>
<p>Special meanings, so chararcter needs escaping</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>meaning</p></th>
<th class="head"><p>syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>reserved</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+*?^$\.[]{}()|/</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>escape reserved</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\</span></code>+reserved</p></td>
</tr>
<tr class="row-even"><td><p>escape multiple</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\Q</span></code> … <code class="docutils literal notranslate"><span class="pre">\E</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>tab</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\t</span></code></p></td>
</tr>
<tr class="row-even"><td><p>line feed, return</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\n</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>carriage return</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\r</span></code></p></td>
</tr>
</tbody>
</table>
<p><strong>Capture Groups</strong></p>
<p>“hold on” to patterns for later, or group tokens into a single, bigger pattern.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>meaning</p></th>
<th class="head"><p>syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>capture group</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(</span></code>ABC<code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>reference group</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\1</span></code>(<code class="docutils literal notranslate"><span class="pre">$1</span></code>), <code class="docutils literal notranslate"><span class="pre">\2</span></code>(<code class="docutils literal notranslate"><span class="pre">$2</span></code>), etc.</p></td>
</tr>
<tr class="row-even"><td><p>named group</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(?'</span></code>name<code class="docutils literal notranslate"><span class="pre">'</span></code> ABC<code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>reference name</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\k'</span></code>name<code class="docutils literal notranslate"><span class="pre">'</span></code></p></td>
</tr>
<tr class="row-even"><td><p>non-capture group</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(?:</span></code>ABC<code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
</tr>
</tbody>
</table>
<p>For other things like atomic groups, branch resets, or subroutine definitions, see a regex reference manual or webpage! :)</p>
<p><strong>Lookaround</strong></p>
<p>sometimes you want to make sure stuff does or does not “exist”, but don’t <em>need</em> that stuff, itself.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>meaning</p></th>
<th class="head"><p>syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>positive lookahead</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(?=</span></code>ABC<code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>negative lookahead</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(?!</span></code>ABC<code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>positive lookbehind</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(?&lt;=</span></code>ABC<code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>negative lookbehind</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(?&lt;!</span></code>ABC<code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>discard until</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\K</span></code></p></td>
</tr>
</tbody>
</table>
<p>E.g. <code class="docutils literal notranslate"><span class="pre">(?=New</span> <span class="pre">)York</span></code> will return the match <code class="docutils literal notranslate"><span class="pre">York</span></code>, but only when it sees <code class="docutils literal notranslate"><span class="pre">New</span> </code> in front of it.</p>
<p>Be careful, not all languages’ regex implementations support all of these!</p>
<p><strong>Quantifiers &amp; Alternation</strong></p>
<p>How much of something? Also, boolean operations (kinda…)</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>meaning</p></th>
<th class="head"><p>syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>one-or-more (plus)</p></td>
<td><p>ABC<code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Any amount (star)</p></td>
<td><p>ABC<code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
</tr>
<tr class="row-even"><td><p>quantifier</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{</span></code>n<code class="docutils literal notranslate"><span class="pre">}</span></code> or <code class="docutils literal notranslate"><span class="pre">{</span></code>start<code class="docutils literal notranslate"><span class="pre">,</span></code>stop<code class="docutils literal notranslate"><span class="pre">}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0 or 1 (optional)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">?</span></code></p></td>
</tr>
<tr class="row-even"><td><p>make lazy</p></td>
<td><p>quantifier+<code class="docutils literal notranslate"><span class="pre">?</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">+?</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>alternation (OR)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">|</span></code></p></td>
</tr>
</tbody>
</table>
<p>These are <em>incredibly</em> useful, since you can build sophisticated patterns using smaller, specific building blocks:</p>
<blockquote>
<div><p>Entity Legos!</p>
</div></blockquote>
<p><strong>Flags</strong></p>
<p>Configuration for the regex parser.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>meaning</p></th>
<th class="head"><p>syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ignore case</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">i</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>global search</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">g</span></code></p></td>
</tr>
<tr class="row-even"><td><p>multiline</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>dotall</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
</tr>
<tr class="row-even"><td><p>no literal ws</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>ungreedy</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">U</span></code></p></td>
</tr>
</tbody>
</table>
<p>Use depends on implementation:</p>
<ul class="simple">
<li><p>after the pattern (e.g. in vim): <code class="docutils literal notranslate"><span class="pre">/pattern/gms</span></code></p></li>
<li><p>as an Enum kwarg (in Python): <code class="docutils literal notranslate"><span class="pre">re.S</span></code>, <code class="docutils literal notranslate"><span class="pre">re.M</span></code>, etc.</p></li>
</ul>
<p><strong>References</strong></p>
<ul class="simple">
<li><p>Need Practice? <a class="reference external" href="https://alf.nu/RegexGolf">Rgex Golf</a> is pretty fun!</p>
<ul>
<li><p>get the matches, ignore the false matches</p></li>
<li><p>as <em>few</em> characters in the pattern as possible</p></li>
</ul>
</li>
<li><p>Need help? <a class="reference external" href="https://regexr.com">regexr.com</a></p>
<ul>
<li><p>Docstrings and examples for all you just saw</p></li>
<li><p>add unit tests (like “golf” to pass/fail)</p></li>
<li><p>get auto explanations for <em>why</em> something matches</p></li>
</ul>
</li>
</ul>
<p><strong>Discussion</strong>:</p>
<p>What is this for?</p>
<p><code class="docutils literal notranslate"><span class="pre">([ab]*)c\1</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Try below: </span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="n">patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([ab]*)c\1&#39;</span><span class="p">)</span>

<span class="n">patt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;aabcaab&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;re.Match object; span=(0, 7), match=&#39;aabcaab&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>note that this matches, but the next one does not:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">patt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;aabcbaa&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This means that the “group” being referened is <em>evaluated</em> before it gets referenced later… <code class="docutils literal notranslate"><span class="pre">\1</span></code> <em>must</em> be <code class="docutils literal notranslate"><span class="pre">aab</span></code> in this case, not <code class="docutils literal notranslate"><span class="pre">b</span></code> (even though that <em>would</em> be a valid match for <code class="docutils literal notranslate"><span class="pre">[ab]*</span></code>).
Our pattern matched on <code class="docutils literal notranslate"><span class="pre">aab</span></code> instead of <code class="docutils literal notranslate"><span class="pre">b</span></code>, so <code class="docutils literal notranslate"><span class="pre">\1</span></code> must match that!</p>
<p>Now, the <code class="docutils literal notranslate"><span class="pre">findall</span></code> function will return <em>match groups</em>…in fact, it will find all non-overlapping matches.
Since <code class="docutils literal notranslate"><span class="pre">b</span></code> is a valid match group, <em>and</em> is duplicated for <code class="docutils literal notranslate"><span class="pre">\1</span></code> to succeed, the <code class="docutils literal notranslate"><span class="pre">findall</span></code> function <em>will return it</em>.
This is different from the <code class="docutils literal notranslate"><span class="pre">match</span></code> function!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">patt</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;aabcaab  aabcbaa&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;aab&#39;, &#39;b&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="a-pedantic-note">
<h3>A (pedantic note)<a class="headerlink" href="#a-pedantic-note" title="Permalink to this heading">#</a></h3>
<p>That example isn’t actually “regular”, in a computer-science sense.
It isn’t even “context-free”.</p>
<p><strong>regular expression</strong> comes from Chomsky’s Hierarchy, in that it defines a <em>regular language</em> (the strictest subset, below <em>context-free</em>).
A regular language is equivalent to a language that can be recognized by a finite automoton.</p>
<p>What we just witnessed (exact-string memory of a group instance) was <em>not</em> context-free, or regular.</p>
<blockquote>
<div><p>modern RegEx implementations are majorly “souped-up” with convenience features!</p>
</div></blockquote>
</section>
</section>
<section id="take-a-break-exercises">
<h2>Take a Break (Exercises)<a class="headerlink" href="#take-a-break-exercises" title="Permalink to this heading">#</a></h2>
<ul>
<li><p>Write an expression to match markdown sections, to return <code class="docutils literal notranslate"><span class="pre">(hashes,</span> <span class="pre">header,</span> <span class="pre">content)</span></code> pairs.</p>
<blockquote>
<div><p><em>tip: use “multiline”<code class="docutils literal notranslate"><span class="pre">re.M</span></code> and “dotall” <code class="docutils literal notranslate"><span class="pre">re.S</span></code> flags</em></p>
</div></blockquote>
</li>
<li><p>Write expressions to match <em>Wordle</em> words, given feedback</p>
<blockquote>
<div><p><em>tip: how can we make boolean “AND” in regex?</em></p>
</div></blockquote>
</li>
</ul>
<section id="markdown-parser-worked-example">
<h3>Markdown Parser (worked example)<a class="headerlink" href="#markdown-parser-worked-example" title="Permalink to this heading">#</a></h3>
<p>One approach to turning markdown into a table of sections</p>
<ul class="simple">
<li><p>group the header “hash” symbols</p></li>
<li><p>group the text that <em>follows</em> the hash symbols</p></li>
<li><p>find all text on the next line(s), EXCEPT:</p></li>
<li><p>stop when the <em>next</em> line (look-ahead) is another header!</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="s2">&quot;(^#+)&quot;</span>  <span class="c1"># the header hashes</span>
    <span class="s2">&quot;\s([\w -:]*)&quot;</span>  <span class="c1"># the title (could contain non-word chars)</span>
    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">+(.*?)&quot;</span>  <span class="c1"># the body content</span>
    <span class="s2">&quot;(?=^#|\Z)&quot;</span><span class="p">,</span> <span class="c1"># do not include the next section header!</span>
    <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">S</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># FIND `patt` SUCH THAT:  </span>
<span class="n">matches</span> <span class="o">=</span> <span class="n">patt</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd"># This is a Markdown Title</span>
<span class="sd">this is _italicized content_.</span>

<span class="sd">## This is a Level 2 Subtitle</span>
<span class="sd">What more is there to say?</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">matches</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>level</th>
      <th>title</th>
      <th>content</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>#</td>
      <td>This is a Markdown Title</td>
      <td>this is _italicized content_.\n\n</td>
    </tr>
    <tr>
      <th>1</th>
      <td>##</td>
      <td>This is a Level 2 Subtitle</td>
      <td>What more is there to say?\n</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="tokenizers">
<h3>Tokenizers<a class="headerlink" href="#tokenizers" title="Permalink to this heading">#</a></h3>
<p>To split text into tokens, we could match patterns for:</p>
<ul class="simple">
<li><p>what <em>is</em> a word? –&gt; <code class="docutils literal notranslate"><span class="pre">re.findall</span></code></p></li>
<li><p>what is <em>not</em> a word? –&gt; <code class="docutils literal notranslate"><span class="pre">re.split</span></code></p></li>
</ul>
<p>It’s worth mentioning that the <em>token</em> we match is not “the same” as the <em>entity</em>.
Rather, we humans are using RegEx as an assumption that pieces of matching text are valid stand-ins to represent the abstract entity, correctly!</p>
<p>This distinction becomes especially important when our human languages have e.g. <a class="reference external" href="https://www.wikiwand.com/en/Polysemy">polysemy</a>; some <em>tokens</em> should point to completely separate entities, depending on conext.
However, if we assume Regex as a mechanism to find tokens meant to <em>stand-in</em> for entities of interest, that’s a <em>rule</em> standing in for our intent.</p>
<p><strong>Whitespace Tokenizer</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_str</span> <span class="o">=</span> <span class="s2">&quot;Isn&#39;t this fun? It&#39;s time to tokenize!&quot;</span>
<span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;\s&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">my_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&quot;Isn&#39;t&quot;, &#39;this&#39;, &#39;fun?&#39;, &quot;It&#39;s&quot;, &#39;time&#39;, &#39;to&#39;, &#39;tokenize!&#39;]
</pre></div>
</div>
</div>
</div>
<p>This looks pretty good!
Notice, though, the punctuation is <em>sometimes</em> helpful (it’s, isn’t), but often adds unnecessary extra (“fun?”, “tokenize!”, all are ostensibly the same entity as “fun” or “tokenize”. |</p>
<p><strong>Scikit-Learn-Style Tokenizer</strong></p>
<p>Very popular way to tokenize text, especially given the intended use-case (statistical NLP, with matrices)</p>
<p><code class="docutils literal notranslate"><span class="pre">\b\w\w+\b</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\b\w\w+\b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">my_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Isn&#39;, &#39;this&#39;, &#39;fun&#39;, &#39;It&#39;, &#39;time&#39;, &#39;to&#39;, &#39;tokenize&#39;]
</pre></div>
</div>
</div>
</div>
<p>This time, we avoid punctuation, but lose conjunctions.
It’s not uncommon to remove punctuation entirely as a preprocessing step.</p>
<p>Does that always make sense?</p>
</section>
<section id="technical-tokens-for-technical-entities">
<h3>“Technical” Tokens for Technical Entities<a class="headerlink" href="#technical-tokens-for-technical-entities" title="Permalink to this heading">#</a></h3>
<p>A lot of times the above assumptions won’t cut it, <em>especially</em> if there are specific technical entities that a token needs to reference.
Here are a few patterns I have seen in e.g. Maintenance Work Order text:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Pattern</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\#[\w\d]+\b</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">#T43H5sw</span></code></p></td>
<td><p>ID’s for machines, positions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">\b\w[\/\&amp;]\w\b</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">P&amp;G</span></code>,<code class="docutils literal notranslate"><span class="pre">A/C</span></code></p></td>
<td><p>Split bigrams, common shorthands</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\b\w[\w\'\d]+\b</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">won't</span></code></p></td>
<td><p>conjuctions (won vs. won’t start)</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="s1">&#39;(?:\#[\w\d]+\b)&#39;</span>
    <span class="sa">r</span><span class="s1">&#39;|(?:\b\w[\/\&amp;]\w)\b&#39;</span>
    <span class="sa">r</span><span class="s1">&#39;|(?:\b\w[\w</span><span class="se">\&#39;</span><span class="s1">\d]+)\b&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span>
    <span class="s2">&quot;Stop H43; repos. to #5 grade.&quot;</span>
    <span class="s2">&quot;Carburetor won&#39;t start.&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Stop&#39;, &#39;H43&#39;, &#39;repos&#39;, &#39;to&#39;, &#39;#5&#39;, &#39;grade&#39;, &#39;Carburetor&#39;, &quot;won&#39;t&quot;, &#39;start&#39;]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="relational-pedantry-graphs-ontologies">
<h2>Relational Pedantry: Graphs &amp; Ontologies<a class="headerlink" href="#relational-pedantry-graphs-ontologies" title="Permalink to this heading">#</a></h2>
<p>How we define and standardize known relations between entities.</p>
<p>Now that we have ways to <em>explicitly define</em> what we intend an entity <strong>occurence</strong> to look like, we can start to <em>explicitly define</em> the ways that entities relate to one-another.</p>
<p>This is a (mathematical) <em>graph</em>, if we think of entities as <strong>nodes</strong> and relationships as <strong>edges</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span>
    <span class="s1">&#39;digraph &quot;entities and relations&quot; &#39;</span>
    <span class="s1">&#39;{ rankdir=LR; &#39;</span>
    <span class="s1">&#39;A -&gt; B [label=&quot;relation A:B&quot;] &#39;</span>
    <span class="s1">&#39;C -&gt; B [label=&quot;relation C:B&quot;]&#39;</span>
    <span class="s1">&#39;}&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/84088283248471a915523ba3add82ac2037a03f709852c1a43c49c91ae2cdaee.svg" src="../_images/84088283248471a915523ba3add82ac2037a03f709852c1a43c49c91ae2cdaee.svg" /></div>
</div>
<p>There are many ways to use graphs to express how entities related to one another, but two of the most common are</p>
<ul class="simple">
<li><p><strong>Labeled Property Graphs</strong> e.g. NoSQL Graph Databases like <a class="reference external" href="https://neo4j.com/">Neo4J</a>, <a class="reference external" href="https://janusgraph.org/">JanusGraph</a>, etc.<br />
Nodes and edges both have unique ID’s, and can have internal properties (key-value).</p></li>
<li><p><strong>Triple Stores</strong> i.e. the Resource Description Framework (<a class="reference external" href="https://www.w3.org/TR/rdf11-primer/">RDF</a>)<br />
All information is stored as triples: (subject, predicate, object). Every vertex has a unique identifier (no internal information).</p></li>
</ul>
<p>For more information comparing the two paradigms, see <a class="reference external" href="https://neo4j.com/blog/rdf-triple-store-vs-labeled-property-graph-difference/">this breakdown</a> of a talk by Jesús Barrasa. We will return to these, and how knowledge engineering works (and interfaces with text data) more generally in later sections.</p>
<p>LPG’s come from a data-storage and querying community (think databases), while RDF comes from a web-technology culture (think W3C and Semantic Web).
We will return to these later, but for now we want to focus on forms that <em>assumptions</em> about entity relationships might take.</p>
<p>What kinds of relations are out there already?</p>
<section id="wordnet">
<h3><a class="reference external" href="https://wordnet.princeton.edu/">WordNet</a><a class="headerlink" href="#wordnet" title="Permalink to this heading">#</a></h3>
<p>Lexical database for nouns, verbs, adverbs, and adjectives.</p>
<ul class="simple">
<li><p>Groups terms into sets of synonyms (synsets) that have meaning</p></li>
<li><p>Several types of relationships are available</p>
<ul>
<li><p>Hyper/hyponyms (is-a). e.g. bed is a furniture</p></li>
<li><p>Mero/holonyms (part-of) e.g. bread part-of sandwich.</p></li>
<li><p>entailment (implies) e.g. snore implies sleep.</p></li>
</ul>
</li>
<li><p>Distinguishes between types (e.g. President) and instances (Abraham Lincoln)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nltk</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">nltk</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;tokenizers/punkt&#39;</span><span class="p">)</span>
    <span class="n">nltk</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;corpora/wordnet&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">LookupError</span><span class="p">:</span>
    <span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;punkt&#39;</span><span class="p">)</span>
    <span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;wordnet&#39;</span><span class="p">);</span> 
    <span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;omw-1.4&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">wordnet</span> <span class="k">as</span> <span class="n">wn</span>
<span class="n">wn</span><span class="o">.</span><span class="n">synsets</span><span class="p">(</span><span class="s1">&#39;dog&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Synset(&#39;dog.n.01&#39;),
 Synset(&#39;frump.n.01&#39;),
 Synset(&#39;dog.n.03&#39;),
 Synset(&#39;cad.n.01&#39;),
 Synset(&#39;frank.n.02&#39;),
 Synset(&#39;pawl.n.01&#39;),
 Synset(&#39;andiron.n.01&#39;),
 Synset(&#39;chase.v.01&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;dog.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">definition</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;dog.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lemma_names</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>a member of the genus Canis (probably descended from the common wolf) that has been domesticated by man since prehistoric times; occurs in many breeds
[&#39;dog&#39;, &#39;domestic_dog&#39;, &#39;Canis_familiaris&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hyper/Hyponyms</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pasta could be: &#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lemma_names</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;pasta.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hyponyms</span><span class="p">()])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pasta is a: &#39;</span><span class="p">,</span> <span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;pasta.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hypernyms</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pasta could be:  [[&#39;cannelloni&#39;], [&#39;lasagna&#39;, &#39;lasagne&#39;], [&#39;macaroni_and_cheese&#39;], [&#39;spaghetti&#39;]]
pasta is a:  [Synset(&#39;dish.n.02&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Holo/Meronyms</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a living room is part of a: &#39;</span><span class="p">,</span> <span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;living_room.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">part_holonyms</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lemma_names</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>a living room is part of a:  [&#39;dwelling&#39;, &#39;home&#39;, &#39;domicile&#39;, &#39;abode&#39;, &#39;habitation&#39;, &#39;dwelling_house&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s1">&#39;digraph {rankdir=LR &#39;</span>
                <span class="s1">&#39;living_room -&gt; dwelling [label=&quot;part of&quot;];&#39;</span>
                <span class="s1">&#39;dwelling -&gt; home [label=&quot;same as&quot;]&#39;</span>
                <span class="s1">&#39;dwelling -&gt; abode [label=&quot;same as&quot;]}&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/e416c99c97f9d09eddf54e66dc3433a13e0376bd96e2efdbd5daf4b87aaf95b5.svg" src="../_images/e416c99c97f9d09eddf54e66dc3433a13e0376bd96e2efdbd5daf4b87aaf95b5.svg" /></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lemma_names</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;car.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">part_meronyms</span><span class="p">()]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;accelerator&#39;, &#39;accelerator_pedal&#39;, &#39;gas_pedal&#39;, &#39;gas&#39;, &#39;throttle&#39;, &#39;gun&#39;],
 [&#39;air_bag&#39;],
 [&#39;auto_accessory&#39;],
 [&#39;automobile_engine&#39;],
 [&#39;automobile_horn&#39;, &#39;car_horn&#39;, &#39;motor_horn&#39;, &#39;horn&#39;, &#39;hooter&#39;],
 [&#39;buffer&#39;, &#39;fender&#39;],
 [&#39;bumper&#39;],
 [&#39;car_door&#39;],
 [&#39;car_mirror&#39;],
 [&#39;car_seat&#39;],
 [&#39;car_window&#39;],
 [&#39;fender&#39;, &#39;wing&#39;],
 [&#39;first_gear&#39;, &#39;first&#39;, &#39;low_gear&#39;, &#39;low&#39;],
 [&#39;floorboard&#39;],
 [&#39;gasoline_engine&#39;, &#39;petrol_engine&#39;],
 [&#39;glove_compartment&#39;],
 [&#39;grille&#39;, &#39;radiator_grille&#39;],
 [&#39;high_gear&#39;, &#39;high&#39;],
 [&#39;hood&#39;, &#39;bonnet&#39;, &#39;cowl&#39;, &#39;cowling&#39;],
 [&#39;luggage_compartment&#39;, &#39;automobile_trunk&#39;, &#39;trunk&#39;],
 [&#39;rear_window&#39;],
 [&#39;reverse&#39;, &#39;reverse_gear&#39;],
 [&#39;roof&#39;],
 [&#39;running_board&#39;],
 [&#39;stabilizer_bar&#39;, &#39;anti-sway_bar&#39;],
 [&#39;sunroof&#39;, &#39;sunshine-roof&#39;],
 [&#39;tail_fin&#39;, &#39;tailfin&#39;, &#39;fin&#39;],
 [&#39;third_gear&#39;, &#39;third&#39;],
 [&#39;window&#39;]]
</pre></div>
</div>
</div>
</div>
<p><strong>Problem</strong> <br />
WordNet is for <em>general english</em>, and is <strong>not</strong> exhaustive.
If using for technical text, expect decent precision, but poor recall.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lemma_names</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;bicycle.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">part_meronyms</span><span class="p">()]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;bicycle_seat&#39;, &#39;saddle&#39;],
 [&#39;bicycle_wheel&#39;],
 [&#39;chain&#39;],
 [&#39;coaster_brake&#39;],
 [&#39;handlebar&#39;],
 [&#39;kickstand&#39;],
 [&#39;mudguard&#39;, &#39;splash_guard&#39;, &#39;splash-guard&#39;],
 [&#39;pedal&#39;, &#39;treadle&#39;, &#39;foot_pedal&#39;, &#39;foot_lever&#39;],
 [&#39;sprocket&#39;, &#39;sprocket_wheel&#39;]]
</pre></div>
</div>
</div>
</div>
<p>Meanwhile, from an engineering paper discussing bicycle drivetrains:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;graph g { </span>
<span class="s2">  graph[rankdir=LR, center=true, margin=0.2, nodesep=0.05, ranksep=0.1, bgcolor=&quot;transparent&quot;;];</span>
<span class="s2">  node[shape=plaintext, color=none, width=0.1, height=0.2, fontsize=11]</span>
<span class="s2">  pedal -- crank_arm;</span>
<span class="s2">  crank_arm -- chain_rings;</span>
<span class="s2">  chain_rings -- rear_derailleur;</span>
<span class="s2">  chain_rings -- chain;</span>
<span class="s2">  chain -- cogset;</span>
<span class="s2">  cogset -- rear_hub;</span>
<span class="s2">  rear_derailleur -- rear_hub;</span>
<span class="s2">  rear_hub -- rear_spokes;</span>
<span class="s2">  rear_spokes -- rear_rim;</span>
<span class="s2">  rear_rim -- rear_tire;</span>
<span class="s2">  </span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c74ecf3e5323ff635e0fbec610844117445b4ed53420504f017daad566c1e598.svg" src="../_images/c74ecf3e5323ff635e0fbec610844117445b4ed53420504f017daad566c1e598.svg" /></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Entailments</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;to buy means to: &#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lemma_names</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;buy.v.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">entailments</span><span class="p">()])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;to snore means to: &#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lemma_names</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;snore.v.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">entailments</span><span class="p">()])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>to buy means to:  [[&#39;choose&#39;, &#39;take&#39;, &#39;select&#39;, &#39;pick_out&#39;], [&#39;pay&#39;]]
to snore means to:  [[&#39;sleep&#39;, &#39;kip&#39;, &#39;slumber&#39;, &quot;log_Z&#39;s&quot;, &quot;catch_some_Z&#39;s&quot;]]
</pre></div>
</div>
</div>
</div>
<p>For sources and more info:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.nltk.org/howto/wordnet.html">https://www.nltk.org/howto/wordnet.html</a></p></li>
<li><p><a class="reference external" href="https://blog.xrds.acm.org/2017/07/power-wordnet-use-python/">https://blog.xrds.acm.org/2017/07/power-wordnet-use-python/</a></p></li>
</ul>
</section>
<section id="conceptnet">
<h3>ConceptNet<a class="headerlink" href="#conceptnet" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>Crowdsourced knowledge</strong>: Open Mind Common Sense, Wiktionary, DBPedia, Yahoo Japan / Kyoto University project</p></li>
<li><p><strong>Games with a purpose</strong>: Verbosity, <a class="reference external" href="http://nadya.jp">nadya.jp</a></p></li>
<li><p><strong>Expert resources</strong>: Open Multilingual WordNet, JMDict, CEDict, OpenCyc, CLDR emoji definitions</p></li>
</ul>
<p>Also uses <em>graph embeddings</em> (we’ll come back to this later) to “fuzzify” knowledge relationships.</p>
<p>see: <em>ConceptNet in Context</em>, <a class="reference external" href="https://rcqa-ws.github.io/slides/robyn.pdf">https://rcqa-ws.github.io/slides/robyn.pdf</a></p>
<p><strong>How it works</strong>:<br />
ConceptNet builds on WordNet and many others, using nodes and more generic “relations”</p>
<ul class="simple">
<li><p>PartOf, UsedFor, FormOf, HasA, CapableOf, Causes…</p></li>
<li><p>see <a class="github reference external" href="https://github.com/commonsense/conceptnet5/wiki/Relations">commonsense/conceptnet5</a></p></li>
</ul>
<p>Interestingly, these are <em>not</em> the “edges”… edges are assertions that have start and end-nodes, and <em>have a relation property</em>.</p>
<ul class="simple">
<li><p>Edges can also have sources, weights (for uncertainty), licenses, datasets, “surfaceText” that generated the assertion, etc.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span> 
<span class="k">def</span> <span class="nf">conceptnet_query</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://api.conceptnet.io/c/en/&#39;</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">+</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">conceptnet_query</span><span class="p">(</span><span class="s1">&#39;bicycle?rel=/r/PartOf&#39;</span><span class="p">)[</span><span class="s1">&#39;edges&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">:</span><span class="se">\t</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;rel&#39;</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">],</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;surfaceText&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AtLocation:	You are likely to find [[a bicycle]] in [[the garage]]
HasA:	[[A bicycle]] has [[two wheels]]
UsedFor:	[[a bicycle]] is for [[transportation]]
AtLocation:	*Something you find on [[the street]] is [[a bicycle]]
IsA:	[[A bicycle]] is [[a two wheel vehicle]]
UsedFor:	[[a bicycle]] is used for [[riding]]
MadeOf:	[[a bicycle]] can be made of [[metal]]
PartOf:	[[a wheel]] is part of [[a bicycle]]
HasA:	[[a bicycle]] has [[a chain]]
HasA:	[[A bicycle]] has [[two tires]]
AtLocation:	*Something you find at [[a toy store]] is [[a bicycle]]
UsedFor:	[[a bicycle]] is for [[Racing]]
Synonym:	[[چرخیدن]] is a translation of [[bicycle]]
IsA:	[[ordinary]] is a type of [[bicycle]]
IsA:	[[a bicycle]] is a type of [[transportation]]
Synonym:	[[bersepeda]] is a translation of [[bicycle]]
PartOf:	[[pedal]] is a part of [[bicycle]]
Synonym:	[[bicicleta]] is a translation of [[bicycle]]
Synonym:	[[berbasikal]] is a translation of [[bicycle]]
Synonym:	[[pedalear]] is a translation of [[bicycle]]
</pre></div>
</div>
</div>
</div>
<p>Play around! see: <a class="reference external" href="https://conceptnet.io/c/en/bicycle?rel=/r/PartOf&amp;amp;limit=1000">https://conceptnet.io/c/en/bicycle?rel=/r/PartOf&amp;limit=1000</a></p>
</section>
</section>
<section id="takeaway">
<h2>Takeaway<a class="headerlink" href="#takeaway" title="Permalink to this heading">#</a></h2>
<p>The “top-down” approach to transforming text into “something computable” is to express your intent as <em>rules</em>.</p>
<p><strong>Entities</strong></p>
<ul class="simple">
<li><p>“things that exist”, and can have <em>types</em> or <em>instances</em>.</p></li>
<li><p>we must map text occurences (tokens) to entities using rules e.g. RegEx</p></li>
</ul>
<p><strong>Relationships</strong></p>
<ul class="simple">
<li><p>how entities relate to each other, often as “verbs”, but more generally as “predicates”.</p></li>
<li><p>Will often see holonyms/meronyms, hypernyms/hyponyms, entailment, and synonyms</p></li>
<li><p>How they are represented greatly depends on domain and historical use-case (database vs. web, etc.)</p></li>
</ul>
<p>We’ve only brushed the surface of ontologies and entity relationships, but the key point for this chapter is that <em>people had to write all of this down</em>!
For rules-based systems, the name of the game is <em>human input</em>, which can be incredibly useful and powerful, while also being very fragile to context-specific application.
It also takes <em>a lot of work</em> to write down all of these rules, let alone validate them.</p>
<p>Using one of these pre-existing rules-based systems is making, whether admitted or not, an <em>important assumption</em> about the applicability of these rules to your problem!</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "text-data"
        },
        kernelOptions: {
            name: "text-data",
            path: "./01-assumptions"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'text-data'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="intent-01-keywords-nb.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Keywords</p>
      </div>
    </a>
    <a class="right-next"
       href="data.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Driving with Data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#entity-legos-regular-expressions-regex">Entity Legos: Regular Expressions (RegEx)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-regex">What is RegEx</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-pedantic-note">A (pedantic note)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#take-a-break-exercises">Take a Break (Exercises)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#markdown-parser-worked-example">Markdown Parser (worked example)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tokenizers">Tokenizers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#technical-tokens-for-technical-entities">“Technical” Tokens for Technical Entities</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relational-pedantry-graphs-ontologies">Relational Pedantry: Graphs &amp; Ontologies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wordnet">WordNet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conceptnet">ConceptNet</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#takeaway">Takeaway</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Rachael Sexton
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>